# 书签管理器功能说明

## 功能概览

浏览器扩展新增了独立的本地书签管理功能，与导航站功能完全独立。

## 主要功能

### 1. 📚 书签管理
- 树形结构查看所有书签和文件夹
- 展开/折叠文件夹
- 全部展开/全部折叠

### 2. 🔍 搜索书签
- 实时搜索书签标题和 URL
- 高亮显示搜索结果

### 3. ✏️ 编辑功能
- 编辑书签名称和 URL
- 编辑文件夹名称
- 新建文件夹
- 在文件夹中添加书签
- 删除书签/文件夹

### 4. 🔗 检测无效链接（增强版）
采用多重验证 + DNS 诊断技术，大幅减少误报：

**检测策略：**
1. **HTTP 多重验证**
   - 第一步：HEAD 请求（CORS 模式）
   - 第二步：失败则尝试 GET 请求
   - 第三步：回退到 no-cors 模式
   - 401/403 状态码视为"可达但受限"（有效）

2. **DNS 诊断（DoH）**
   - 对 HTTP 失败的链接进行 DNS 解析
   - 根据地区自动选择最优 DNS 提供商：
     - 中文用户：阿里DNS → Cloudflare → Google
     - 其他语言：Google → Cloudflare → 阿里DNS
   - 区分"域名不存在"和"网络问题"

3. **智能判断**
   - 🔴 域名不存在 → 网站已关闭（真正无效）
   - 🟡 DNS 正常但 HTTP 失败 → 可能是网络问题/防火墙拦截
   - ⚪ DNS 检测失败 → 无法确定

4. **性能优化**
   - 主机级节流：同一域名请求间隔 200ms，避免被限流
   - 结果缓存：相同 URL 不重复检测
   - 可随时停止检测

### 5. 🔍 查找重复书签
- 按 URL 智能匹配重复项
- 自动忽略末尾斜杠和 www 前缀
- 支持批量删除

### 6. 📊 使用分析
基于浏览历史记录分析书签使用情况：

**三个分类标签：**
- 🕸️ **吃灰书签**：从未访问或超过 30 天未访问
- 🔥 **常用书签**：按访问次数从高到低排序
- ❄️ **少用书签**：访问次数 ≤ 5 次

**统计数据：**
- 总书签数
- 从未访问的书签数
- 超过 90 天未访问的书签数
- 总访问次数

**吃灰度标签：**
- 🟢 7 天内访问
- 🔵 7-30 天
- 🟡 30-90 天
- 🔴 超过 90 天 / 1 年+
- 🟡 从未访问

## 使用方法

1. 点击扩展图标打开弹窗
2. 点击"📚 书签管理器"按钮
3. 在新标签页中打开书签管理器

## 权限说明

- `bookmarks` - 读写浏览器书签
- `history` - 读取浏览历史（用于使用分析）

## 技术特点

- 完全本地运行，不需要后端服务器
- 数据不上传，隐私安全
- 与导航站功能完全独立
- 基于 Chrome Bookmarks API 和 History API

## 版本

v1.1.0 - 2024
