var Ue=Object.defineProperty,Ae=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var _e=(H,n,u)=>n in H?Ue(H,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):H[n]=u,ve=(H,n)=>{for(var u in n||(n={}))Ie.call(n,u)&&_e(H,u,n[u]);if(ye)for(var u of ye(n))Te.call(n,u)&&_e(H,u,n[u]);return H},be=(H,n)=>Ae(H,De(n));var V=(H,n,u)=>new Promise((M,x)=>{var T=a=>{try{C(u.next(a))}catch(g){x(g)}},S=a=>{try{C(u.throw(a))}catch(g){x(g)}},C=a=>a.done?M(a.value):Promise.resolve(a.value).then(T,S);C((u=u.apply(H,n)).next())});import{_ as Y,c as i,o,b as e,t as w,z as ne,r as b,g as te,d as P,w as _,v as D,l as he,F as J,a as G,e as pe,A as $e,B as we,q as E,x as ke,j as me,n as F,C as se,y as ge,p as le,D as Se,i as Le,k as We,T as Ne,E as ze,G as Pe,H as He}from"./index-BJ-tWu13.js";import{g as xe,q as Ee,r as Fe,s as Oe,t as Re,w as je,x as qe,c as Ve,i as Je,u as Ce,n as Me,e as Ge,y as Ke,z as Qe,A as fe,B as Xe,C as Ye,D as Ze,E as et,a as tt,F as st,G as lt,H as at,b as nt,I as ot,J as it,K as dt,L as rt,M as ut,N as ct,O as vt}from"./urlNormalizer-Bsb4-Inz.js";const pt={class:"welcome-page"},mt={class:"welcome-title"},bt={class:"welcome-cards"},gt={class:"welcome-card"},ft={class:"welcome-value"},ht={class:"welcome-card"},wt={class:"welcome-value"},kt={__name:"WelcomePage",props:{lastLoginTime:String,lastLoginIp:String,currentUsername:String},setup(H){return(n,u)=>(o(),i("div",pt,[e("h2",mt,"æ¬¢è¿æ‚¨ï¼Œ"+w(H.currentUsername||"admin")+"ï¼",1),e("div",bt,[e("div",gt,[u[0]||(u[0]=ne('<div class="welcome-icon time-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-5cc4f846></path></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",ft,w(H.lastLoginTime||"--"),1)]),e("div",ht,[u[1]||(u[1]=ne('<div class="welcome-icon ip-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-5cc4f846></circle></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",wt,w(H.lastLoginIp||"--"),1)])])]))}},yt=Y(kt,[["__scopeId","data-v-5cc4f846"]]),_t={class:"menu-manage"},$t={key:0,class:"loading-overlay"},Ct={class:"menu-header"},Mt={class:"menu-add"},xt=["disabled"],Vt={class:"menu-content"},Bt={key:0,class:"empty-state"},Ut={class:"menu-card-header"},At={class:"menu-title"},Dt={class:"menu-name"},It={class:"menu-order"},Tt={class:"menu-actions"},St=["onClick"],Lt=["onClick"],Wt=["onClick"],Nt={key:0,class:"sub-menu-list"},zt={class:"sub-menu-name"},Pt={class:"sub-menu-order"},Ht={class:"sub-menu-actions"},Et=["onClick"],Ft=["onClick"],Ot={key:1,class:"no-sub-menu"},Rt={key:1,class:"modal-overlay"},jt={class:"modal"},qt={class:"modal-header"},Jt={class:"modal-body"},Gt={class:"form-group"},Kt={class:"form-group"},Qt={class:"modal-footer"},Xt=["disabled"],Yt={key:2,class:"modal-overlay"},Zt={class:"modal"},es={class:"modal-header"},ts={class:"modal-body"},ss={class:"form-group"},ls={class:"form-group"},as={class:"modal-footer"},ns=["disabled"],os={key:3,class:"modal-overlay"},is={class:"modal"},ds={class:"modal-body"},rs={class:"form-group"},us={class:"form-group"},cs={class:"modal-footer"},vs=["disabled"],ps={__name:"MenuManage",setup(H){const n=b([]),u=b(!1),M=b("åŠ è½½ä¸­..."),x=b(""),T=b(!1),S=b(null),C=b({name:"",order:0}),a=b(!1),g=b(null),v=b(""),m=b({name:"",order:0}),d=b(!1),l=b(null),s=b({name:"",order:0});te(()=>{$()});function c(){try{window.dispatchEvent(new CustomEvent("nav-menus-updated")),console.log("[æ ç›®ç®¡ç†] å·²é€šçŸ¥æ‰©å±•åˆ·æ–°å³é”®èœå•")}catch(W){console.warn("[æ ç›®ç®¡ç†] é€šçŸ¥æ‰©å±•å¤±è´¥:",W)}}function $(W=!1){return V(this,null,function*(){var f,U;u.value=!0,M.value="åŠ è½½ä¸­...";try{const N=yield xe(!0);n.value=N.data||[],W&&c()}catch(N){alert("åŠ è½½å¤±è´¥: "+(((U=(f=N.response)==null?void 0:f.data)==null?void 0:U.error)||N.message))}finally{u.value=!1}})}function L(){return V(this,null,function*(){var W,f;if(x.value.trim()){u.value=!0,M.value="æ·»åŠ ä¸­...";try{const U=n.value.length?Math.max(...n.value.map(N=>N.order||0)):0;yield Ee({name:x.value.trim(),order:U+1}),x.value="",yield $(!0)}catch(U){alert("æ·»åŠ å¤±è´¥: "+(((f=(W=U.response)==null?void 0:W.data)==null?void 0:f.error)||U.message)),u.value=!1}}})}function k(W){S.value=W,C.value={name:W.name,order:W.order},T.value=!0}function y(){return V(this,null,function*(){var N,A;if(!C.value.name.trim()||!S.value)return;const W=S.value.id,f=C.value.name.trim(),U=C.value.order;O(),u.value=!0,M.value="ä¿å­˜ä¸­...";try{yield Re(W,{name:f,order:U}),yield $(!0)}catch(p){alert("ä¿å­˜å¤±è´¥: "+(((A=(N=p.response)==null?void 0:N.data)==null?void 0:A.error)||p.message)),u.value=!1}})}function Q(W){return V(this,null,function*(){var f,U;if(confirm(`ç¡®å®šåˆ é™¤ä¸»èœå•ã€Œ${W.name}ã€å—ï¼Ÿ
å°†åŒæ—¶åˆ é™¤å…¶ä¸‹æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ï¼`)){u.value=!0,M.value="åˆ é™¤ä¸­...";try{yield Fe(W.id),yield $(!0)}catch(N){alert("åˆ é™¤å¤±è´¥: "+(((U=(f=N.response)==null?void 0:f.data)==null?void 0:U.error)||N.message)),u.value=!1}}})}function j(W){g.value=W.id,v.value=W.name;const f=W.subMenus||[],U=f.length?Math.max(...f.map(N=>N.order||0)):0;m.value={name:"",order:U+1},a.value=!0}function q(){return V(this,null,function*(){var N,A;if(!m.value.name.trim()||!g.value)return;const W=g.value,f=m.value.name.trim(),U=m.value.order;O(),u.value=!0,M.value="æ·»åŠ ä¸­...";try{yield je(W,{name:f,order:U}),yield $(!0)}catch(p){alert("æ·»åŠ å¤±è´¥: "+(((A=(N=p.response)==null?void 0:N.data)==null?void 0:A.error)||p.message)),u.value=!1}})}function B(W,f){l.value=f,s.value={name:f.name,order:f.order},d.value=!0}function z(){return V(this,null,function*(){var N,A;if(!s.value.name.trim()||!l.value)return;const W=l.value.id,f=s.value.name.trim(),U=s.value.order;O(),u.value=!0,M.value="ä¿å­˜ä¸­...";try{yield qe(W,{name:f,order:U}),yield $(!0)}catch(p){alert("ä¿å­˜å¤±è´¥: "+(((A=(N=p.response)==null?void 0:N.data)==null?void 0:A.error)||p.message)),u.value=!1}})}function ae(W){return V(this,null,function*(){var f,U;if(confirm(`ç¡®å®šåˆ é™¤å­èœå•ã€Œ${W.name}ã€å—ï¼Ÿ
å°†åŒæ—¶åˆ é™¤å…¶ä¸‹æ‰€æœ‰å¡ç‰‡ï¼`)){u.value=!0,M.value="åˆ é™¤ä¸­...";try{yield Oe(W.id),yield $(!0)}catch(N){alert("åˆ é™¤å¤±è´¥: "+(((U=(f=N.response)==null?void 0:f.data)==null?void 0:U.error)||N.message)),u.value=!1}}})}function O(){T.value=!1,a.value=!1,d.value=!1,S.value=null,l.value=null}return(W,f)=>(o(),i("div",_t,[u.value?(o(),i("div",$t,[f[7]||(f[7]=e("div",{class:"loading-spinner"},null,-1)),e("span",null,w(M.value),1)])):P("",!0),e("div",Ct,[f[8]||(f[8]=e("h2",{class:"page-title"},"æ ç›®ç®¡ç†",-1)),e("div",Mt,[_(e("input",{"onUpdate:modelValue":f[0]||(f[0]=U=>x.value=U),placeholder:"è¾“å…¥ä¸»èœå•åç§°",class:"input",onKeyup:he(L,["enter"])},null,544),[[D,x.value]]),e("button",{class:"btn btn-primary",onClick:L,disabled:u.value||!x.value.trim()}," + æ·»åŠ ä¸»èœå• ",8,xt)])]),e("div",Vt,[n.value.length===0?(o(),i("div",Bt,[...f[9]||(f[9]=[e("p",null,"æš‚æ— èœå•ï¼Œè¯·æ·»åŠ ç¬¬ä¸€ä¸ªä¸»èœå•",-1)])])):P("",!0),(o(!0),i(J,null,G(n.value,U=>(o(),i("div",{key:U.id,class:"menu-card"},[e("div",Ut,[e("div",At,[e("span",Dt,w(U.name),1),e("span",It,"æ’åº: "+w(U.order),1)]),e("div",Tt,[e("button",{class:"btn-icon btn-edit",onClick:N=>k(U),title:"ç¼–è¾‘"},[...f[10]||(f[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,St),e("button",{class:"btn-icon btn-add",onClick:N=>j(U),title:"æ·»åŠ å­èœå•"},[...f[11]||(f[11]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1)])],8,Lt),e("button",{class:"btn-icon btn-delete",onClick:N=>Q(U),title:"åˆ é™¤"},[...f[12]||(f[12]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"})],-1)])],8,Wt)])]),U.subMenus&&U.subMenus.length>0?(o(),i("div",Nt,[(o(!0),i(J,null,G(U.subMenus,N=>(o(),i("div",{key:N.id,class:"sub-menu-item"},[e("span",zt,w(N.name),1),e("span",Pt,"æ’åº: "+w(N.order),1),e("div",Ht,[e("button",{class:"btn-icon-sm btn-edit",onClick:A=>B(U,N),title:"ç¼–è¾‘"},[...f[13]||(f[13]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Et),e("button",{class:"btn-icon-sm btn-delete",onClick:A=>ae(N),title:"åˆ é™¤"},[...f[14]||(f[14]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"})],-1)])],8,Ft)])]))),128))])):(o(),i("div",Ot,[...f[15]||(f[15]=[e("span",null,"æš‚æ— å­èœå•",-1)])]))]))),128))]),T.value?(o(),i("div",Rt,[e("div",jt,[e("div",qt,[e("h3",null,w(S.value?"ç¼–è¾‘ä¸»èœå•":"æ·»åŠ å­èœå•"),1),e("button",{class:"modal-close",onClick:O},"Ã—")]),e("div",Jt,[e("div",Gt,[f[16]||(f[16]=e("label",null,"åç§°",-1)),_(e("input",{"onUpdate:modelValue":f[1]||(f[1]=U=>C.value.name=U),type:"text",class:"input",placeholder:"è¯·è¾“å…¥åç§°"},null,512),[[D,C.value.name]])]),e("div",Kt,[f[17]||(f[17]=e("label",null,"æ’åº",-1)),_(e("input",{"onUpdate:modelValue":f[2]||(f[2]=U=>C.value.order=U),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[D,C.value.order,void 0,{number:!0}]])])]),e("div",Qt,[e("button",{class:"btn btn-cancel",onClick:O},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:y,disabled:!C.value.name.trim()},"ä¿å­˜",8,Xt)])])])):P("",!0),a.value?(o(),i("div",Yt,[e("div",Zt,[e("div",es,[e("h3",null,"æ·»åŠ å­èœå•åˆ°ã€Œ"+w(v.value)+"ã€",1),e("button",{class:"modal-close",onClick:O},"Ã—")]),e("div",ts,[e("div",ss,[f[18]||(f[18]=e("label",null,"å­èœå•åç§°",-1)),_(e("input",{"onUpdate:modelValue":f[3]||(f[3]=U=>m.value.name=U),type:"text",class:"input",placeholder:"è¯·è¾“å…¥å­èœå•åç§°"},null,512),[[D,m.value.name]])]),e("div",ls,[f[19]||(f[19]=e("label",null,"æ’åº",-1)),_(e("input",{"onUpdate:modelValue":f[4]||(f[4]=U=>m.value.order=U),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[D,m.value.order,void 0,{number:!0}]])])]),e("div",as,[e("button",{class:"btn btn-cancel",onClick:O},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:q,disabled:!m.value.name.trim()},"æ·»åŠ ",8,ns)])])])):P("",!0),d.value?(o(),i("div",os,[e("div",is,[e("div",{class:"modal-header"},[f[20]||(f[20]=e("h3",null,"ç¼–è¾‘å­èœå•",-1)),e("button",{class:"modal-close",onClick:O},"Ã—")]),e("div",ds,[e("div",rs,[f[21]||(f[21]=e("label",null,"å­èœå•åç§°",-1)),_(e("input",{"onUpdate:modelValue":f[5]||(f[5]=U=>s.value.name=U),type:"text",class:"input",placeholder:"è¯·è¾“å…¥å­èœå•åç§°"},null,512),[[D,s.value.name]])]),e("div",us,[f[22]||(f[22]=e("label",null,"æ’åº",-1)),_(e("input",{"onUpdate:modelValue":f[6]||(f[6]=U=>s.value.order=U),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[D,s.value.order,void 0,{number:!0}]])])]),e("div",cs,[e("button",{class:"btn btn-cancel",onClick:O},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:z,disabled:!s.value.name.trim()},"ä¿å­˜",8,vs)])])])):P("",!0)]))}},ms=Y(ps,[["__scopeId","data-v-7671c3a1"]]),bs={class:"card-manage"},gs={class:"card-header"},fs={class:"card-add"},hs=["value"],ws=["value"],ks={class:"card-card"},ys={class:"card-table"},_s=["onUpdate:modelValue","onBlur"],$s=["onUpdate:modelValue","onBlur"],Cs=["onUpdate:modelValue","onBlur"],Ms=["onUpdate:modelValue","onBlur"],xs=["onClick"],Vs={key:0,class:"selected-tags"},Bs={key:1,class:"tag-placeholder"},Us=["onUpdate:modelValue","onBlur"],As=["onClick"],Ds={class:"modal-body"},Is={key:0,class:"empty-tags"},Ts={key:1,class:"tag-options"},Ss=["checked","onChange"],Ls={class:"modal-body"},Ws={class:"duplicate-comparison"},Ns={class:"card-info-box existing"},zs={class:"card-details"},Ps={class:"detail-row"},Hs={class:"detail-value"},Es={class:"detail-row"},Fs={class:"detail-value url"},Os={key:0,class:"detail-row"},Rs={class:"detail-value url"},js={class:"card-info-box pending"},qs={class:"card-details"},Js={class:"detail-row"},Gs={class:"detail-value"},Ks={class:"detail-row"},Qs={class:"detail-value url"},Xs={key:0,class:"detail-row"},Ys={class:"detail-value url"},Zs={__name:"CardManage",setup(H){const n=b([]),u=b([]),M=b(),x=b(""),T=b(""),S=b(""),C=b(""),a=b([]),g=b(!1),v=b(null),m=b([]),d=b(!1),l=b(null),s=b(null),c=pe(()=>{if(!M.value)return[];const A=n.value.find(p=>p.id===M.value);return(A==null?void 0:A.subMenus)||[]});te(()=>V(null,null,function*(){const A=yield xe();n.value=A.data,n.value.length&&(M.value=n.value[0].id,x.value="");const p=yield Ve();a.value=p.data})),$e(M,()=>{x.value="",k()}),$e(x,k);function $(){x.value=""}function L(){k()}function k(){return V(this,null,function*(){if(!M.value)return;const A=yield Ge(M.value,x.value||null);u.value=A.data})}function y(){return V(this,null,function*(){if(!T.value||!S.value)return;const A=u.value.find(p=>Je({title:T.value,url:S.value},p));A?(l.value=A,s.value={menu_id:M.value,sub_menu_id:x.value||null,title:T.value,url:S.value,logo_url:C.value},d.value=!0):yield O({menu_id:M.value,sub_menu_id:x.value||null,title:T.value,url:S.value,logo_url:C.value})})}function Q(A){return V(this,null,function*(){yield Ce(A.id,{menu_id:M.value,sub_menu_id:x.value||null,title:A.title,url:A.url,logo_url:A.logo_url,desc:A.desc,order:A.order,tagIds:A.tags?A.tags.map(p=>p.id):[]}),k()})}function j(A){return V(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ"))return;const p=u.value.findIndex(ee=>ee.id===A);p>-1&&u.value.splice(p,1);try{yield Me(A)}catch(ee){console.error("åˆ é™¤å¡ç‰‡å¤±è´¥:",ee),yield k()}})}function q(A){v.value=A,m.value=A.tags?A.tags.map(p=>p.id):[],g.value=!0}function B(){g.value=!1,v.value=null,m.value=[]}function z(A){const p=m.value.indexOf(A);p>-1?m.value.splice(p,1):m.value.push(A)}function ae(){return V(this,null,function*(){v.value&&(yield Ce(v.value.id,{menu_id:v.value.menu_id,sub_menu_id:v.value.sub_menu_id,title:v.value.title,url:v.value.url,logo_url:v.value.logo_url,desc:v.value.desc,order:v.value.order,tagIds:m.value}),B(),k())})}function O(A){return V(this,null,function*(){yield Ke(A),T.value="",S.value="",C.value="",k()})}function W(){d.value=!1,l.value=null,s.value=null}function f(){W(),T.value="",S.value="",C.value=""}function U(){return V(this,null,function*(){!s.value||!l.value||(yield Me(l.value.id),yield O(s.value),W())})}function N(){s.value&&(T.value=s.value.title,S.value=s.value.url,C.value=s.value.logo_url||"",W(),alert("è¯·ä¿®æ”¹å¡ç‰‡ä¿¡æ¯åå†æ¬¡ç‚¹å‡»â€œæ·»åŠ å¡ç‰‡â€æŒ‰é’®"))}return(A,p)=>{var ee,oe,ie,X,de,re,Z,ue;return o(),i("div",bs,[e("div",gs,[p[9]||(p[9]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",fs,[_(e("select",{"onUpdate:modelValue":p[0]||(p[0]=I=>M.value=I),class:"input narrow",onChange:$},[(o(!0),i(J,null,G(n.value,I=>(o(),i("option",{value:I.id,key:I.id},w(I.name),9,hs))),128))],544),[[we,M.value]]),_(e("select",{"onUpdate:modelValue":p[1]||(p[1]=I=>x.value=I),class:"input narrow",onChange:L},[p[7]||(p[7]=e("option",{value:""},"ä¸»èœå•",-1)),(o(!0),i(J,null,G(c.value,I=>(o(),i("option",{value:I.id,key:I.id},w(I.name),9,ws))),128))],544),[[we,x.value]]),_(e("input",{"onUpdate:modelValue":p[2]||(p[2]=I=>T.value=I),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[D,T.value]]),_(e("input",{"onUpdate:modelValue":p[3]||(p[3]=I=>S.value=I),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[D,S.value]]),_(e("input",{"onUpdate:modelValue":p[4]||(p[4]=I=>C.value=I),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[D,C.value]]),e("button",{class:"btn",onClick:y},[...p[8]||(p[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),E(" æ·»åŠ å¡ç‰‡ ",-1)])])])]),e("div",ks,[e("table",ys,[p[11]||(p[11]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ ‡ç­¾"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(o(!0),i(J,null,G(u.value,I=>(o(),i("tr",{key:I.id},[e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.title=r,onBlur:r=>Q(I),class:"table-input"},null,40,_s),[[D,I.title]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.url=r,onBlur:r=>Q(I),class:"table-input"},null,40,$s),[[D,I.url]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.logo_url=r,onBlur:r=>Q(I),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,Cs),[[D,I.logo_url]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.desc=r,onBlur:r=>Q(I),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,Ms),[[D,I.desc]])]),e("td",null,[e("div",{class:"tag-selector",onClick:r=>q(I)},[I.tags&&I.tags.length>0?(o(),i("div",Vs,[(o(!0),i(J,null,G(I.tags,r=>(o(),i("span",{key:r.id,class:"mini-tag",style:ke({backgroundColor:r.color})},w(r.name),5))),128))])):(o(),i("span",Bs,"é€‰æ‹©æ ‡ç­¾"))],8,xs)]),e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.order=r,type:"number",onBlur:r=>Q(I),class:"table-input order-input"},null,40,Us),[[D,I.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:r=>j(I.id),title:"åˆ é™¤"},[...p[10]||(p[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,As)])]))),128))])])]),g.value?(o(),i("div",{key:0,class:"modal-overlay",onClick:B},[e("div",{class:"modal-content",onClick:p[5]||(p[5]=me(()=>{},["stop"]))},[e("div",{class:"modal-header"},[p[12]||(p[12]=e("h3",null,"é€‰æ‹©æ ‡ç­¾",-1)),e("button",{class:"close-btn",onClick:B},"Ã—")]),e("div",Ds,[a.value.length===0?(o(),i("div",Is,[...p[13]||(p[13]=[e("p",null,"æš‚æ— æ ‡ç­¾ï¼Œè¯·å…ˆåœ¨æ ‡ç­¾ç®¡ç†é¡µé¢åˆ›å»º",-1)])])):(o(),i("div",Ts,[(o(!0),i(J,null,G(a.value,I=>(o(),i("label",{key:I.id,class:"tag-option"},[e("input",{type:"checkbox",checked:m.value.includes(I.id),onChange:r=>z(I.id)},null,40,Ss),e("span",{class:"tag-label",style:ke({backgroundColor:I.color})},w(I.name),5)]))),128))]))]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:B},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:ae},"ç¡®å®š")])])])):P("",!0),d.value?(o(),i("div",{key:1,class:"modal-overlay",onClick:W},[e("div",{class:"modal-content duplicate-modal",onClick:p[6]||(p[6]=me(()=>{},["stop"]))},[e("div",{class:"modal-header"},[p[14]||(p[14]=ne('<div class="header-with-icon" data-v-edd548d5><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2" data-v-edd548d5><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" data-v-edd548d5></path><line x1="12" y1="9" x2="12" y2="13" data-v-edd548d5></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-edd548d5></line></svg><h3 data-v-edd548d5>æ£€æµ‹åˆ°é‡å¤å¡ç‰‡</h3></div>',1)),e("button",{class:"close-btn",onClick:W},"Ã—")]),e("div",Ls,[p[24]||(p[24]=e("div",{class:"duplicate-warning"},[e("p",{class:"warning-text"},"æ‚¨è¦æ·»åŠ çš„å¡ç‰‡ä¸ä»¥ä¸‹ç°æœ‰å¡ç‰‡é‡å¤ï¼š")],-1)),e("div",Ws,[e("div",Ns,[p[18]||(p[18]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"ç°æœ‰å¡ç‰‡")],-1)),e("div",zs,[e("div",Ps,[p[15]||(p[15]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",Hs,w((ee=l.value)==null?void 0:ee.title),1)]),e("div",Es,[p[16]||(p[16]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",Fs,w((oe=l.value)==null?void 0:oe.url),1)]),(ie=l.value)!=null&&ie.logo_url?(o(),i("div",Os,[p[17]||(p[17]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",Rs,w((X=l.value)==null?void 0:X.logo_url),1)])):P("",!0)])]),p[23]||(p[23]=e("div",{class:"arrow-divider"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af","stroke-width":"2"},[e("path",{d:"M5 12h14M12 5l7 7-7 7"})])],-1)),e("div",js,[p[22]||(p[22]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"å¾…æ·»åŠ å¡ç‰‡")],-1)),e("div",qs,[e("div",Js,[p[19]||(p[19]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",Gs,w((de=s.value)==null?void 0:de.title),1)]),e("div",Ks,[p[20]||(p[20]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",Qs,w((re=s.value)==null?void 0:re.url),1)]),(Z=s.value)!=null&&Z.logo_url?(o(),i("div",Xs,[p[21]||(p[21]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",Ys,w((ue=s.value)==null?void 0:ue.logo_url),1)])):P("",!0)])])]),p[25]||(p[25]=e("div",{class:"duplicate-actions-info"},[e("p",null,"è¯·é€‰æ‹©å¦‚ä½•å¤„ç†ï¼š")],-1))]),e("div",{class:"modal-footer duplicate-footer"},[e("button",{class:"btn btn-secondary",onClick:f},[...p[26]||(p[26]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),E(" è·³è¿‡ ",-1)])]),e("button",{class:"btn btn-warning",onClick:U},[...p[27]||(p[27]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e("path",{d:"M21 3v5h-5"})],-1),E(" æ›¿æ¢ ",-1)])]),e("button",{class:"btn btn-primary",onClick:N},[...p[28]||(p[28]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),E(" ç¼–è¾‘åæ·»åŠ  ",-1)])])])])])):P("",!0)])}}},el=Y(Zs,[["__scopeId","data-v-edd548d5"]]),tl={class:"duplicate-manage"},sl={class:"section-header"},ll=["disabled"],al={key:0,class:"duplicate-results"},nl={class:"result-summary"},ol={class:"summary-card"},il={class:"summary-value"},dl={class:"summary-card warning"},rl={class:"summary-value"},ul={class:"summary-card danger"},cl={class:"summary-value"},vl={class:"duplicate-groups"},pl={class:"group-header"},ml={class:"group-count"},bl={class:"card-item original"},gl={class:"card-info"},fl={class:"card-title"},hl={class:"card-url"},wl={key:0,class:"card-desc"},kl={class:"card-id"},yl={class:"duplicates-list"},_l={class:"card-info"},$l={class:"card-title"},Cl={class:"card-url"},Ml={key:0,class:"card-desc"},xl={class:"card-actions"},Vl={class:"card-id"},Bl=["onClick","disabled"],Ul={class:"group-actions"},Al=["onClick","disabled"],Dl={class:"global-actions"},Il=["disabled"],Tl={key:1,class:"no-duplicates"},Sl={key:2,class:"initial-hint"},Ll={key:3,class:"error"},Wl={__name:"DuplicateManage",setup(H){const n=b(!1),u=b(!1),M=b(!1),x=b([]),T=b(0),S=b(0),C=b("");function a(){return V(this,null,function*(){var d,l;n.value=!0,C.value="";try{const s=yield Qe();T.value=s.data.total,x.value=s.data.duplicateGroups,S.value=s.data.duplicateCount,M.value=!0}catch(s){C.value=((l=(d=s.response)==null?void 0:d.data)==null?void 0:l.error)||"æ£€æµ‹å¤±è´¥",console.error("æ£€æµ‹é‡å¤å¤±è´¥:",s)}finally{n.value=!1}})}function g(d){return V(this,null,function*(){var l,s,c;if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ")){u.value=!0,C.value="";try{console.log("[å»é‡ç®¡ç†] åˆ é™¤å•ä¸ªå¡ç‰‡:",d);const $=yield fe([d]);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",$.data),$.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield a()):C.value="åˆ é™¤å¤±è´¥ï¼š"+($.data.message||"æœªçŸ¥é”™è¯¯")}catch($){console.error("[å»é‡ç®¡ç†] åˆ é™¤å¡ç‰‡å¤±è´¥:",$),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(l=$.response)==null?void 0:l.data),C.value=((c=(s=$.response)==null?void 0:s.data)==null?void 0:c.error)||$.message||"åˆ é™¤å¤±è´¥"}finally{u.value=!1}}})}function v(d){return V(this,null,function*(){var s,c,$;const l=d.duplicates.length;if(confirm(`ç¡®å®šè¦åˆ é™¤è¿™ ${l} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

å°†ä¿ç•™ï¼š${d.original.title}`)){u.value=!0,C.value="";try{const L=d.duplicates.map(y=>y.id);console.log("[å»é‡ç®¡ç†] åˆ é™¤ä¸€ç»„é‡å¤å¡ç‰‡:",L);const k=yield fe(L);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",k.data),k.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield a()):C.value="åˆ é™¤å¤±è´¥ï¼š"+(k.data.message||"æœªçŸ¥é”™è¯¯")}catch(L){console.error("[å»é‡ç®¡ç†] åˆ é™¤é‡å¤å¡ç‰‡å¤±è´¥:",L),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(s=L.response)==null?void 0:s.data),C.value=(($=(c=L.response)==null?void 0:c.data)==null?void 0:$.error)||L.message||"åˆ é™¤å¤±è´¥"}finally{u.value=!1}}})}function m(){return V(this,null,function*(){var l,s,c;const d=S.value;if(confirm(`ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ ${d} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`)){u.value=!0,C.value="";try{const $=x.value.flatMap(k=>k.duplicates.map(y=>y.id));console.log("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡:",$);const L=yield fe($);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",L.data),L.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield a()):C.value="åˆ é™¤å¤±è´¥ï¼š"+(L.data.message||"æœªçŸ¥é”™è¯¯")}catch($){console.error("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¤±è´¥:",$),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(l=$.response)==null?void 0:l.data),C.value=((c=(s=$.response)==null?void 0:s.data)==null?void 0:c.error)||$.message||"åˆ é™¤å¤±è´¥"}finally{u.value=!1}}})}return(d,l)=>(o(),i("div",tl,[e("div",sl,[l[0]||(l[0]=e("h3",null,"å¡ç‰‡å»é‡ç®¡ç†",-1)),e("button",{onClick:a,class:"btn btn-primary",disabled:n.value},w(n.value?"æ£€æµ‹ä¸­...":"ğŸ” ä¸€é”®æ£€æµ‹é‡å¤"),9,ll)]),x.value.length>0?(o(),i("div",al,[e("div",nl,[e("div",ol,[l[1]||(l[1]=e("div",{class:"summary-label"},"æ€»å¡ç‰‡æ•°",-1)),e("div",il,w(T.value),1)]),e("div",dl,[l[2]||(l[2]=e("div",{class:"summary-label"},"é‡å¤ç»„æ•°",-1)),e("div",rl,w(x.value.length),1)]),e("div",ul,[l[3]||(l[3]=e("div",{class:"summary-label"},"é‡å¤å¡ç‰‡",-1)),e("div",cl,w(S.value),1)])]),e("div",vl,[(o(!0),i(J,null,G(x.value,(s,c)=>(o(),i("div",{key:c,class:"duplicate-group"},[e("div",pl,[e("h4",null,"é‡å¤ç»„ "+w(c+1),1),e("span",ml,w(s.totalCount)+" å¼ å¡ç‰‡",1)]),e("div",bl,[l[4]||(l[4]=e("div",{class:"card-badge"},"ä¿ç•™",-1)),e("div",gl,[e("div",fl,w(s.original.title),1),e("div",hl,w(s.original.url),1),s.original.desc?(o(),i("div",wl,w(s.original.desc),1)):P("",!0)]),e("div",kl,"ID: "+w(s.original.id),1)]),e("div",yl,[(o(!0),i(J,null,G(s.duplicates,$=>(o(),i("div",{key:$.id,class:"card-item duplicate"},[l[5]||(l[5]=e("div",{class:"card-badge danger"},"é‡å¤",-1)),e("div",_l,[e("div",$l,w($.title),1),e("div",Cl,w($.url),1),$.desc?(o(),i("div",Ml,w($.desc),1)):P("",!0)]),e("div",xl,[e("span",Vl,"ID: "+w($.id),1),e("button",{onClick:L=>g($.id),class:"btn-remove",disabled:u.value,title:"åˆ é™¤æ­¤å¡ç‰‡"}," åˆ é™¤ ",8,Bl)])]))),128))]),e("div",Ul,[e("button",{onClick:$=>v(s),class:"btn btn-danger",disabled:u.value}," åˆ é™¤æ­¤ç»„æ‰€æœ‰é‡å¤å¡ç‰‡ ("+w(s.duplicates.length)+" å¼ ) ",9,Al)])]))),128))]),e("div",Dl,[e("button",{onClick:m,class:"btn btn-danger btn-large",disabled:u.value},w(u.value?"åˆ é™¤ä¸­...":`åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡ (${S.value} å¼ )`),9,Il)])])):M.value&&x.value.length===0?(o(),i("div",Tl,[...l[6]||(l[6]=[e("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"#1abc9c","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})],-1),e("h3",null,"å¤ªæ£’äº†ï¼æ²¡æœ‰å‘ç°é‡å¤å¡ç‰‡",-1),e("p",null,"æ‚¨çš„å¯¼èˆªå¡ç‰‡éƒ½æ˜¯å”¯ä¸€çš„",-1)])])):M.value?P("",!0):(o(),i("div",Sl,[...l[7]||(l[7]=[ne('<svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" data-v-62bbc778><circle cx="12" cy="12" r="10" data-v-62bbc778></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-62bbc778></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-62bbc778></line></svg><h3 data-v-62bbc778>ç‚¹å‡»&quot;ä¸€é”®æ£€æµ‹é‡å¤&quot;å¼€å§‹æ‰«æ</h3><p data-v-62bbc778>ç³»ç»Ÿå°†æ£€æµ‹æ‰€æœ‰é‡å¤çš„å¯¼èˆªå¡ç‰‡</p><ul class="hint-list" data-v-62bbc778><li data-v-62bbc778>ğŸ“Œ URL ç›¸åŒçš„å¡ç‰‡</li><li data-v-62bbc778>ğŸ“Œ æ ‡é¢˜ç›¸åŒä¸”åŸŸåç›¸åŒçš„å¡ç‰‡</li></ul>',4)])])),C.value?(o(),i("p",Ll,w(C.value),1)):P("",!0)]))}},Nl=Y(Wl,[["__scopeId","data-v-62bbc778"]]),zl={class:"tag-manage"},Pl={class:"tag-header"},Hl={class:"tag-add"},El={class:"tag-content"},Fl={key:0,class:"empty-state"},Ol={key:1,class:"tag-list"},Rl={class:"tag-info"},jl=["onUpdate:modelValue","onBlur"],ql={class:"tag-stats"},Jl={class:"card-count"},Gl={class:"tag-controls"},Kl=["onUpdate:modelValue","onChange"],Ql={class:"tag-order"},Xl=["onUpdate:modelValue","onBlur"],Yl={class:"tag-actions"},Zl=["onClick"],ea={__name:"TagManage",setup(H){const n=b([]),u=b(""),M=b("#2566d8");te(x);function x(){return V(this,null,function*(){const a=yield Ve();n.value=a.data;for(const g of n.value)try{const v=yield Xe(g.id);g.cardCount=v.data.count}catch(v){g.cardCount=0}})}function T(){return V(this,null,function*(){var d,l;if(!u.value.trim())return;const a=n.value.length?Math.max(...n.value.map(s=>s.order||0)):0,g=u.value.trim(),v=M.value,m={id:Date.now(),name:g,color:v,order:a+1,cardCount:0,_temp:!0};n.value.push(m),u.value="",M.value="#2566d8";try{const s=yield Ye({name:g,color:v,order:a+1}),c=n.value.findIndex($=>$.id===m.id);c>-1&&(n.value[c]=be(ve({},s.data),{cardCount:0}))}catch(s){const c=n.value.findIndex($=>$.id===m.id);c>-1&&n.value.splice(c,1),alert("æ·»åŠ æ ‡ç­¾å¤±è´¥ï¼š"+(((l=(d=s.response)==null?void 0:d.data)==null?void 0:l.error)||s.message))}})}function S(a){return V(this,null,function*(){var g,v;if(!a._temp)try{yield Ze(a.id,{name:a.name,color:a.color,order:a.order})}catch(m){alert("æ›´æ–°æ ‡ç­¾å¤±è´¥ï¼š"+(((v=(g=m.response)==null?void 0:g.data)==null?void 0:v.error)||m.message)),x()}})}function C(a){return V(this,null,function*(){var d,l;const g=n.value.find(s=>s.id===a);if(!g)return;const v=g.cardCount>0?`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${g.name}"å—ï¼Ÿè¿™å°†å–æ¶ˆ ${g.cardCount} å¼ å¡ç‰‡çš„å…³è”ã€‚`:`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${g.name}"å—ï¼Ÿ`;if(!confirm(v))return;const m=n.value.findIndex(s=>s.id===a);m>-1&&n.value.splice(m,1);try{yield et(a)}catch(s){alert("åˆ é™¤æ ‡ç­¾å¤±è´¥ï¼š"+(((l=(d=s.response)==null?void 0:d.data)==null?void 0:l.error)||s.message)),x()}})}return(a,g)=>(o(),i("div",zl,[e("div",Pl,[g[3]||(g[3]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†æ ‡ç­¾"),e("p",{class:"page-desc"},"ä¸ºå¡ç‰‡åˆ›å»ºå¤šç»´åº¦åˆ†ç±»æ ‡ç­¾")],-1)),e("div",Hl,[_(e("input",{"onUpdate:modelValue":g[0]||(g[0]=v=>u.value=v),placeholder:"æ ‡ç­¾åç§°",class:"input",maxlength:"20"},null,512),[[D,u.value]]),_(e("input",{"onUpdate:modelValue":g[1]||(g[1]=v=>M.value=v),type:"color",class:"color-input",title:"é€‰æ‹©æ ‡ç­¾é¢œè‰²"},null,512),[[D,M.value]]),e("button",{class:"btn btn-primary",onClick:T},[...g[2]||(g[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),E(" æ·»åŠ æ ‡ç­¾ ",-1)])])])]),e("div",El,[n.value.length===0?(o(),i("div",Fl,[...g[4]||(g[4]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1),e("p",null,"æš‚æ— æ ‡ç­¾",-1),e("p",{class:"hint"},"åˆ›å»ºç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼Œå¼€å§‹ä¸ºå¡ç‰‡æ·»åŠ å¤šç»´åº¦åˆ†ç±»",-1)])])):(o(),i("div",Ol,[(o(!0),i(J,null,G(n.value,v=>(o(),i("div",{key:v.id,class:"tag-item"},[e("div",{class:"tag-preview",style:ke({backgroundColor:v.color})},[...g[5]||(g[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1)])],4),e("div",Rl,[_(e("input",{"onUpdate:modelValue":m=>v.name=m,onBlur:m=>S(v),class:"tag-name-input",maxlength:"20"},null,40,jl),[[D,v.name]]),e("div",ql,[e("span",Jl,w(v.cardCount||0)+" å¼ å¡ç‰‡",1)])]),e("div",Gl,[_(e("input",{"onUpdate:modelValue":m=>v.color=m,type:"color",onChange:m=>S(v),class:"color-picker",title:"æ›´æ”¹é¢œè‰²"},null,40,Kl),[[D,v.color]]),e("div",Ql,[g[6]||(g[6]=e("span",{class:"order-label"},"æ’åº",-1)),_(e("input",{"onUpdate:modelValue":m=>v.order=m,type:"number",onBlur:m=>S(v),class:"order-input"},null,40,Xl),[[D,v.order,void 0,{number:!0}]])])]),e("div",Yl,[e("button",{class:"btn btn-danger btn-icon",onClick:m=>C(v.id),title:"åˆ é™¤æ ‡ç­¾"},[...g[7]||(g[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Zl)])]))),128))]))])]))}},ta=Y(ea,[["__scopeId","data-v-56efcb56"]]),sa={class:"ad-manage"},la={key:0,class:"loading-state"},aa={key:1,class:"error-state"},na={class:"ad-header"},oa={class:"ad-section"},ia={class:"ad-card"},da={class:"ad-table"},ra={key:0},ua=["onUpdate:modelValue","onBlur"],ca=["onUpdate:modelValue","onBlur"],va=["onClick"],pa={class:"ad-section"},ma={class:"ad-card"},ba={class:"ad-table"},ga={key:0},fa=["onUpdate:modelValue","onBlur"],ha=["onUpdate:modelValue","onBlur"],wa=["onClick"],ka={__name:"AdManage",setup(H){const n=b([]),u=b([]),M=b(""),x=b(""),T=b("left"),S=b(!0),C=b("");te(a);function a(){return V(this,null,function*(){var d,l;S.value=!0,C.value="";try{const s=yield tt();let c=[];Array.isArray(s.data)?c=s.data:s.data&&Array.isArray(s.data.data)&&(c=s.data.data),n.value=c.filter($=>$.position==="left"),u.value=c.filter($=>$.position==="right")}catch(s){console.error("åŠ è½½å¹¿å‘Šå¤±è´¥:",s),C.value="åŠ è½½å¹¿å‘Šå¤±è´¥: "+(((l=(d=s.response)==null?void 0:d.data)==null?void 0:l.error)||s.message),n.value=[],u.value=[]}finally{S.value=!1}})}function g(){return V(this,null,function*(){var d,l;if(!M.value||!x.value){alert("è¯·å¡«å†™å¹¿å‘Šå›¾ç‰‡é“¾æ¥å’Œè·³è½¬é“¾æ¥");return}try{yield st({position:T.value,img:M.value,url:x.value}),M.value="",x.value="",T.value="left",yield a()}catch(s){alert("æ·»åŠ å¹¿å‘Šå¤±è´¥ï¼š"+(((l=(d=s.response)==null?void 0:d.data)==null?void 0:l.error)||s.message))}})}function v(d){return V(this,null,function*(){var l,s;try{yield lt(d.id,{img:d.img,url:d.url})}catch(c){alert("æ›´æ–°å¹¿å‘Šå¤±è´¥ï¼š"+(((s=(l=c.response)==null?void 0:l.data)==null?void 0:s.error)||c.message)),yield a()}})}function m(d){return V(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¹¿å‘Šå—ï¼Ÿ"))return;const l=n.value.findIndex(c=>c.id===d),s=u.value.findIndex(c=>c.id===d);l>-1&&n.value.splice(l,1),s>-1&&u.value.splice(s,1);try{yield at(d)}catch(c){console.error("åˆ é™¤å¹¿å‘Šå¤±è´¥:",c),yield a()}})}return(d,l)=>(o(),i("div",sa,[S.value?(o(),i("div",la,[...l[3]||(l[3]=[e("div",{class:"loading-spinner"},null,-1),e("span",null,"åŠ è½½ä¸­...",-1)])])):C.value?(o(),i("div",aa,[e("p",null,w(C.value),1),e("button",{class:"btn",onClick:a},"é‡è¯•")])):(o(),i(J,{key:2},[e("div",na,[e("form",{class:"ad-add-row",onSubmit:me(g,["prevent"])},[_(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>M.value=s),placeholder:"å¹¿å‘Šå›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[D,M.value]]),_(e("input",{"onUpdate:modelValue":l[1]||(l[1]=s=>x.value=s),placeholder:"å¹¿å‘Šè·³è½¬é“¾æ¥",class:"input"},null,512),[[D,x.value]]),_(e("select",{"onUpdate:modelValue":l[2]||(l[2]=s=>T.value=s),class:"input select-input"},[...l[4]||(l[4]=[e("option",{value:"left"},"å·¦ä¾§å¹¿å‘Š",-1),e("option",{value:"right"},"å³ä¾§å¹¿å‘Š",-1)])],512),[[we,T.value]]),l[5]||(l[5]=e("button",{class:"btn",type:"submit"},"æ·»åŠ å¹¿å‘Š",-1))],32)]),e("div",oa,[l[8]||(l[8]=e("h3",{class:"section-title"},"å·¦ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",ia,[e("table",da,[l[7]||(l[7]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[n.value.length===0?(o(),i("tr",ra,[...l[6]||(l[6]=[e("td",{colspan:"3",class:"empty-row"},"æš‚æ— å·¦ä¾§å¹¿å‘Š",-1)])])):P("",!0),(o(!0),i(J,null,G(n.value,s=>(o(),i("tr",{key:s.id},[e("td",null,[_(e("input",{"onUpdate:modelValue":c=>s.img=c,onBlur:c=>v(s),class:"input"},null,40,ua),[[D,s.img]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":c=>s.url=c,onBlur:c=>v(s),class:"input"},null,40,ca),[[D,s.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:c=>m(s.id)},"åˆ é™¤å¹¿å‘Š",8,va)])]))),128))])])])]),e("div",pa,[l[11]||(l[11]=e("h3",{class:"section-title"},"å³ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",ma,[e("table",ba,[l[10]||(l[10]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[u.value.length===0?(o(),i("tr",ga,[...l[9]||(l[9]=[e("td",{colspan:"3",class:"empty-row"},"æš‚æ— å³ä¾§å¹¿å‘Š",-1)])])):P("",!0),(o(!0),i(J,null,G(u.value,s=>(o(),i("tr",{key:s.id},[e("td",null,[_(e("input",{"onUpdate:modelValue":c=>s.img=c,onBlur:c=>v(s),class:"input"},null,40,fa),[[D,s.img]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":c=>s.url=c,onBlur:c=>v(s),class:"input"},null,40,ha),[[D,s.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:c=>m(s.id)},"åˆ é™¤å¹¿å‘Š",8,wa)])]))),128))])])])])],64))]))}},ya=Y(ka,[["__scopeId","data-v-f6855f5c"]]),_a={class:"friend-manage"},$a={class:"friend-add"},Ca={class:"friend-card"},Ma={class:"friend-table"},xa=["onUpdate:modelValue","onBlur"],Va=["onUpdate:modelValue","onBlur"],Ba=["onUpdate:modelValue","onBlur"],Ua=["onClick"],Aa={__name:"FriendLinkManage",setup(H){const n=b([]),u=b(""),M=b(""),x=b("");te(T);function T(){return V(this,null,function*(){const g=yield nt();n.value=g.data})}function S(){return V(this,null,function*(){!u.value||!M.value||(yield ot({title:u.value,url:M.value,logo:x.value}),u.value="",M.value="",x.value="",T())})}function C(g){return V(this,null,function*(){yield it(g.id,{title:g.title,url:g.url,logo:g.logo}),T()})}function a(g){return V(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå‹é“¾å—ï¼Ÿ"))return;const v=n.value.findIndex(m=>m.id===g);v>-1&&n.value.splice(v,1);try{yield dt(g)}catch(m){console.error("åˆ é™¤å‹é“¾å¤±è´¥:",m),yield T()}})}return(g,v)=>(o(),i("div",_a,[v[4]||(v[4]=e("div",{class:"friend-header"},null,-1)),e("div",$a,[_(e("input",{"onUpdate:modelValue":v[0]||(v[0]=m=>u.value=m),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[D,u.value]]),_(e("input",{"onUpdate:modelValue":v[1]||(v[1]=m=>M.value=m),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[D,M.value]]),_(e("input",{"onUpdate:modelValue":v[2]||(v[2]=m=>x.value=m),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[D,x.value]]),e("button",{class:"btn",onClick:S},"æ·»åŠ å‹é“¾")]),e("div",Ca,[e("table",Ma,[v[3]||(v[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(o(!0),i(J,null,G(n.value,m=>(o(),i("tr",{key:m.id},[e("td",null,[_(e("input",{"onUpdate:modelValue":d=>m.title=d,onBlur:d=>C(m),class:"input"},null,40,xa),[[D,m.title]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":d=>m.url=d,onBlur:d=>C(m),class:"input"},null,40,Va),[[D,m.url]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":d=>m.logo=d,onBlur:d=>C(m),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,Ba),[[D,m.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:d=>a(m.id)},"åˆ é™¤",8,Ua)])]))),128))])])])]))}},Da=Y(Aa,[["__scopeId","data-v-c25e838c"]]),Ia={class:"user-manage"},Ta={class:"user-card"},Sa={class:"username-section"},La={class:"username-form"},Wa={class:"current-username"},Na={class:"username-display"},za={class:"form-group"},Pa={class:"form-actions"},Ha=["disabled"],Ea={class:"password-section"},Fa={class:"password-form"},Oa={class:"form-group"},Ra={class:"form-group"},ja={class:"form-group"},qa={class:"form-actions"},Ja=["disabled"],Ga={__name:"UserManage",setup(H){const n=b(""),u=b(""),M=b(""),x=b(!1),T=b(""),S=b("success"),C=b({}),a=b(""),g=b(!1),v=b(""),m=b("success");te(()=>V(null,null,function*(){yield d()}));function d(){return V(this,null,function*(){try{const L=yield rt();C.value=L.data.data||L.data}catch(L){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",L)}})}function l(){return V(this,null,function*(){var L,k;if(!a.value){s("è¯·è¾“å…¥æ–°ç”¨æˆ·å","error");return}if(a.value.length<3||a.value.length>20){s("ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä½","error");return}if(a.value===C.value.username){s("æ–°ç”¨æˆ·åä¸èƒ½ä¸å½“å‰ç”¨æˆ·åç›¸åŒ","error");return}g.value=!0,v.value="";try{yield ut(a.value),s("ç”¨æˆ·åä¿®æ”¹æˆåŠŸï¼2ç§’åè‡ªåŠ¨é€€å‡ºï¼Œè¯·ä½¿ç”¨æ–°ç”¨æˆ·åé‡æ–°ç™»å½•...","success"),a.value="",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/admin"},2e3)}catch(y){s(((k=(L=y.response)==null?void 0:L.data)==null?void 0:k.message)||"ç”¨æˆ·åä¿®æ”¹å¤±è´¥","error")}finally{g.value=!1}})}function s(L,k){v.value=L,m.value=k,setTimeout(()=>{v.value=""},3e3)}function c(){return V(this,null,function*(){var L,k;if(!n.value||!u.value||!M.value){$("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(u.value!==M.value){$("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(u.value.length<6){$("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}x.value=!0,T.value="";try{yield ct(n.value,u.value),$("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),n.value="",u.value="",M.value=""}catch(y){$(((k=(L=y.response)==null?void 0:L.data)==null?void 0:k.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{x.value=!1}})}function $(L,k){T.value=L,S.value=k,L==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&k==="success"?setTimeout(()=>{T.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{T.value=""},3e3)}return(L,k)=>(o(),i("div",Ia,[k[11]||(k[11]=e("div",{class:"user-header"},null,-1)),e("div",Ta,[e("div",Sa,[k[6]||(k[6]=e("h3",{class:"section-title"},"ä¿®æ”¹ç”¨æˆ·å",-1)),e("div",La,[e("div",Wa,[k[4]||(k[4]=e("label",null,"å½“å‰ç”¨æˆ·åï¼š",-1)),e("span",Na,w(C.value.username||"admin"),1)]),e("div",za,[k[5]||(k[5]=e("label",null,"æ–°ç”¨æˆ·åï¼š",-1)),_(e("input",{"onUpdate:modelValue":k[0]||(k[0]=y=>a.value=y),type:"text",placeholder:"è¯·è¾“å…¥æ–°ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰",class:"input"},null,512),[[D,a.value]])]),e("div",Pa,[e("button",{onClick:l,class:"btn",disabled:g.value},w(g.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹ç”¨æˆ·å"),9,Ha)]),v.value?(o(),i("p",{key:0,class:F(["message",m.value])},w(v.value),3)):P("",!0)])]),e("div",Ea,[k[10]||(k[10]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",Fa,[e("div",Oa,[k[7]||(k[7]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),_(e("input",{"onUpdate:modelValue":k[1]||(k[1]=y=>n.value=y),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[D,n.value]])]),e("div",Ra,[k[8]||(k[8]=e("label",null,"æ–°å¯†ç ï¼š",-1)),_(e("input",{"onUpdate:modelValue":k[2]||(k[2]=y=>u.value=y),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[D,u.value]])]),e("div",ja,[k[9]||(k[9]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),_(e("input",{"onUpdate:modelValue":k[3]||(k[3]=y=>M.value=y),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[D,M.value]])]),e("div",qa,[e("button",{onClick:c,class:"btn",disabled:x.value},w(x.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,Ja)]),T.value?(o(),i("p",{key:0,class:F(["message",S.value])},w(T.value),3)):P("",!0)])])])]))}},Ka=Y(Ga,[["__scopeId","data-v-40392133"]]),Qa={class:"backup-manage"},Xa={class:"tabs"},Ya={class:"tab-content"},Za={class:"toolbar"},en=["disabled"],tn=["disabled"],sn=["disabled"],ln={class:"backup-list"},an={key:0,class:"empty-state"},nn={key:1,class:"backup-grid"},on={class:"backup-info"},dn={class:"backup-name"},rn={class:"backup-meta"},un={class:"backup-size"},cn={class:"backup-date"},vn={key:0,class:"backup-signed",title:"å·²ç­¾åéªŒè¯"},pn={key:1,class:"backup-unsigned",title:"æœªç­¾åï¼ˆå¤–éƒ¨ä¸Šä¼ ï¼‰"},mn={class:"backup-actions"},bn=["onClick"],gn=["onClick"],fn=["onClick"],hn=["onClick"],wn={class:"tab-content"},kn={class:"toolbar"},yn=["disabled"],_n=["disabled"],$n={key:1,class:"info-box"},Cn={class:"backup-list"},Mn={key:0,class:"empty-state"},xn={key:1,class:"backup-grid"},Vn={class:"backup-info"},Bn={class:"backup-name"},Un={class:"backup-meta"},An={class:"backup-size"},Dn={class:"backup-date"},In={class:"backup-actions"},Tn=["onClick"],Sn=["onClick"],Ln={class:"tab-content"},Wn={class:"config-section"},Nn={class:"config-card"},zn={class:"config-header"},Pn={class:"switch"},Hn={key:0,class:"config-fields"},En={class:"field-row"},Fn={class:"field-row"},On={class:"config-card"},Rn={class:"config-header"},jn={class:"switch"},qn={key:0,class:"config-fields"},Jn={class:"field-row"},Gn={class:"time-input"},Kn={class:"field-row"},Qn={class:"field-row checkbox-row"},Xn={class:"checkbox-label"},Yn={class:"config-card"},Zn={class:"config-header"},eo={class:"switch"},to={class:"config-info"},so={key:0,class:"warning-text"},lo={key:0,class:"config-fields"},ao={class:"field-row checkbox-row"},no={class:"checkbox-label"},oo={class:"field-row checkbox-row"},io={class:"checkbox-label"},ro={class:"config-card"},uo={class:"config-header"},co={class:"switch"},vo={key:0,class:"stats-card"},po={class:"stats-grid"},mo={class:"stat-item"},bo={class:"stat-value"},go={class:"stat-item"},fo={class:"stat-value"},ho={class:"stat-item"},wo={class:"stat-value"},ko={class:"stat-item"},yo={class:"stat-value"},_o={class:"config-actions"},$o=["disabled"],Co={key:0,class:"modal-overlay"},Mo={class:"modal-content config-modal"},xo={class:"form-group"},Vo={class:"form-group"},Bo={class:"form-group"},Uo=["placeholder"],Ao={key:0},Do={key:1},Io={class:"modal-actions"},To=["disabled"],So={key:1,class:"modal-overlay"},Lo={class:"modal-content"},Wo={style:{"white-space":"pre-line"}},No={class:"modal-actions"},zo=["disabled"],Po=["disabled"],Ho={key:2,class:"modal-overlay"},Eo={class:"modal-content config-modal"},Fo={class:"form-group"},Oo={class:"form-group"},Ro={class:"modal-actions"},jo=["disabled"],qo={key:3,class:"modal-overlay"},Jo={class:"modal-content config-modal"},Go={class:"form-group"},Ko={class:"modal-actions"},Qo=["disabled"],Xo={__name:"BackupManage",setup(H){const n=b("local"),u=b([]),M=b([]),x=b(!1),T=b(!1),S=b(!1),C=b(null),a=se({create:!1,list:!1,delete:!1,restore:!1,upload:!1,rename:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1,autoBackupConfig:!1}),g=se({name:"",description:""}),v=se({oldName:"",newName:""}),m=b({text:"",type:""}),d=se({show:!1,filename:"",action:null,title:"",message:"",confirmClass:"",signed:!0,processing:!1}),l=se({configured:!1,url:"",username:""}),s=se({url:"",username:"",password:""}),c=se({debounce:{enabled:!0,delay:30,keep:5},scheduled:{enabled:!0,hour:2,minute:0,keep:7,onlyIfModified:!0},webdav:{enabled:!1,syncDaily:!0,syncIncremental:!0},autoClean:!0}),$=b(null),L=localStorage.getItem("token");function k(R){return V(this,arguments,function*(r,t={}){return(yield fetch(r,be(ve({},t),{headers:ve({Authorization:`Bearer ${L}`,"Content-Type":"application/json"},t.headers)}))).json()})}const y=(r,t="success",R=4e3)=>{m.value={text:r,type:t},setTimeout(()=>{m.value={text:"",type:""}},t==="error"?6e3:R)},Q=()=>{g.name="",g.description="",T.value=!0},j=()=>V(null,null,function*(){a.create=!0;const r=yield k("/api/backup/create",{method:"POST",body:JSON.stringify({name:g.name||null,description:g.description||null})});r.success?(y("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),T.value=!1,yield z()):y(r.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),a.create=!1}),q=r=>{v.oldName=r,v.newName=r.replace(".zip",""),S.value=!0},B=()=>V(null,null,function*(){if(!v.newName.trim()){y("è¯·è¾“å…¥æ–°åç§°","error");return}a.rename=!0;const r=yield k(`/api/backup/rename/${v.oldName}`,{method:"PUT",body:JSON.stringify({newName:v.newName})});r.success?(y("é‡å‘½åæˆåŠŸï¼"),S.value=!1,yield z()):y(r.message||"é‡å‘½åå¤±è´¥","error"),a.rename=!1}),z=()=>V(null,null,function*(){a.list=!0;const r=yield k("/api/backup/list");r.success?u.value=r.backups:y("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),a.list=!1}),ae=r=>{window.open(`/api/backup/download/${r}?token=${L}`,"_blank")},O=(r,t)=>{const R=typeof t=="object"?t:{name:t},h=R.name;d.show=!0,d.filename=h,d.action=r,d.signed=R.signed,d.processing=!1,r==="delete"?(d.title="åˆ é™¤",d.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${h} å—ï¼Ÿ`,d.confirmClass="btn-danger"):r==="restore"?(d.title="æ¢å¤",R.signed?d.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${h} å—ï¼Ÿ`:d.message=`âš ï¸ è­¦å‘Šï¼šæ­¤å¤‡ä»½æ–‡ä»¶æœªç­¾åï¼ˆå¯èƒ½æ˜¯å¤–éƒ¨ä¸Šä¼ çš„ï¼‰ï¼Œæ— æ³•éªŒè¯å…¶å®Œæ•´æ€§ã€‚

ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${h} å—ï¼Ÿ`,d.confirmClass="btn-restore"):r==="webdav-restore"?(d.title="ä»WebDAVæ¢å¤",d.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${h} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,d.confirmClass="btn-restore"):r==="webdav-delete"&&(d.title="åˆ é™¤WebDAVå¤‡ä»½",d.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${h} å—ï¼Ÿ`,d.confirmClass="btn-danger")},W=()=>V(null,null,function*(){const{action:r,filename:t,signed:R}=d;d.show=!1,d.processing=!1;try{if(r==="delete"){y("æ­£åœ¨åˆ é™¤å¤‡ä»½...");const h=yield k(`/api/backup/delete/${t}`,{method:"DELETE"});h.success?(y("âœ“ åˆ é™¤æˆåŠŸ"),yield z()):y("âœ— "+(h.message||"åˆ é™¤å¤±è´¥"),"error")}else if(r==="restore"){y("æ­£åœ¨æ¢å¤å¤‡ä»½ï¼Œè¯·ç¨å€™...");const h=R?{}:{forceRestore:!0},K=yield k(`/api/backup/restore/${t}`,{method:"POST",body:JSON.stringify(h)});if(K.success)y("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(ce=>setTimeout(ce,2e3)),yield Promise.all([z(),A(),X(),Z()]),y("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3);else if(K.requireConfirm&&K.code==="NO_SIGNATURE"){if(confirm(K.message+`

ç‚¹å‡»"ç¡®å®š"ç»§ç»­æ¢å¤ï¼Œç‚¹å‡»"å–æ¶ˆ"æ”¾å¼ƒæ“ä½œã€‚`)){const ce=yield k(`/api/backup/restore/${t}`,{method:"POST",body:JSON.stringify({forceRestore:!0})});ce.success?(y("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(Be=>setTimeout(Be,2e3)),yield Promise.all([z(),A(),X(),Z()]),y("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3)):y("âœ— "+(ce.message||"æ¢å¤å¤±è´¥"),"error")}}else y("âœ— "+(K.message||"æ¢å¤å¤±è´¥"),"error")}else r==="webdav-restore"?yield de(t):r==="webdav-delete"&&(yield re(t))}catch(h){y("âœ— æ“ä½œå¤±è´¥: "+h.message,"error")}}),f=r=>r?new Date(r).toLocaleString("zh-CN",{hour12:!1}):"--",U=()=>{C.value.click()},N=r=>V(null,null,function*(){const t=r.target.files[0];if(t){if(!t.name.endsWith(".zip")){y("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),r.target.value="";return}if(t.size>500*1024*1024){y("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),r.target.value="";return}a.upload=!0;try{const R=new FormData;R.append("backup",t);const K=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${L}`},body:R})).json();K.success?(y("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield z()):y(K.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(R){console.error("ä¸Šä¼ å¤±è´¥:",R),y("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{a.upload=!1,r.target.value=""}}}),A=()=>V(null,null,function*(){const r=yield k("/api/backup/webdav/config");r.success&&r.config&&(l.configured=r.config.configured,l.url=r.config.url||"",l.username=r.config.username||"")}),p=()=>V(null,null,function*(){yield A(),s.url=l.url,s.username=l.username,s.password="",x.value=!0}),ee=()=>V(null,null,function*(){if(!s.url||!s.username){y("è¯·å¡«å†™URLå’Œç”¨æˆ·å","error");return}if(!l.configured&&!s.password){y("é¦–æ¬¡é…ç½®æ—¶å¯†ç ä¸èƒ½ä¸ºç©º","error");return}a.webdavConfig=!0;const r=yield k("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(s)});r.success?(y("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"),x.value=!1,yield A(),l.configured&&(yield X())):y(r.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),a.webdavConfig=!1}),oe=()=>V(null,null,function*(){a.webdavBackup=!0;const r=yield k("/api/backup/webdav/backup",{method:"POST"});r.success?(y("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield X()):y(r.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),a.webdavBackup=!1}),ie=r=>{r.target.checked&&!l.configured&&(c.webdav.enabled=!1,y('è¯·å…ˆåœ¨"WebDAVå¤‡ä»½"æ ‡ç­¾é¡µé…ç½®WebDAVè¿æ¥',"error"),n.value="webdav")},X=()=>V(null,null,function*(){a.webdavList=!0;const r=yield k("/api/backup/webdav/list");r.success?M.value=r.backups||[]:y("è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),a.webdavList=!1}),de=r=>V(null,null,function*(){y("æ­£åœ¨ä» WebDAV æ¢å¤å¤‡ä»½ï¼Œè¯·ç¨å€™..."),a.webdavRestore=!0;try{const t=yield k("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:r})});t.success?(y("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(R=>setTimeout(R,2e3)),yield Promise.all([z(),A(),X(),Z()]),y("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3)):y("âœ— "+(t.message||"ä» WebDAV æ¢å¤å¤±è´¥"),"error")}catch(t){y("âœ— æ¢å¤å¤±è´¥: "+t.message,"error")}finally{a.webdavRestore=!1}}),re=r=>V(null,null,function*(){y("æ­£åœ¨åˆ é™¤ WebDAV å¤‡ä»½..."),a.webdavDelete=!0;try{const t=yield k(`/api/backup/webdav/delete/${r}`,{method:"DELETE"});t.success?(y("âœ“ åˆ é™¤æˆåŠŸ"),yield X()):y("âœ— "+(t.message||"åˆ é™¤å¤±è´¥"),"error")}catch(t){y("âœ— åˆ é™¤å¤±è´¥: "+t.message,"error")}finally{a.webdavDelete=!1}}),Z=()=>V(null,null,function*(){const r=yield k("/api/backup/auto/config");r.success&&r.config?(Object.assign(c,r.config),$.value=r.stats||null):y("åŠ è½½è‡ªåŠ¨å¤‡ä»½é…ç½®å¤±è´¥","error")}),ue=()=>V(null,null,function*(){a.autoBackupConfig=!0;const r=yield k("/api/backup/auto/config",{method:"POST",body:JSON.stringify(c)});r.success?(y("è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜æˆåŠŸï¼"),yield Z()):y(r.message||"è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜å¤±è´¥","error"),a.autoBackupConfig=!1}),I=()=>{if(!c.scheduled.enabled)return"æœªå¯ç”¨";const r=String(c.scheduled.hour).padStart(2,"0"),t=String(c.scheduled.minute).padStart(2,"0");return`æ¯å¤© ${r}:${t}`};return te(()=>V(null,null,function*(){yield z(),yield A(),l.configured&&(yield X()),yield Z()})),(r,t)=>{var R;return o(),i("div",Qa,[e("div",Xa,[e("button",{class:F(["tab",{active:n.value==="local"}]),onClick:t[0]||(t[0]=h=>n.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:F(["tab",{active:n.value==="webdav"}]),onClick:t[1]||(t[1]=h=>n.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2),e("button",{class:F(["tab",{active:n.value==="auto"}]),onClick:t[2]||(t[2]=h=>n.value="auto")}," âš™ï¸ è‡ªåŠ¨å¤‡ä»½é…ç½® ",2)]),_(e("div",Ya,[e("div",Za,[e("button",{class:"btn btn-primary",onClick:Q,disabled:a.create},[t[25]||(t[25]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),E(" "+w(a.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,en),e("button",{class:"btn btn-success",onClick:U,disabled:a.upload},[t[26]||(t[26]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),E(" "+w(a.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,tn),e("button",{class:"btn btn-secondary",onClick:z,disabled:a.list},[t[27]||(t[27]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),E(" "+w(a.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,sn),e("input",{ref_key:"fileInput",ref:C,type:"file",accept:".zip",onChange:N,style:{display:"none"}},null,544)]),m.value.text?(o(),i("div",{key:0,class:F(["message",m.value.type])},w(m.value.text),3)):P("",!0),e("div",ln,[u.value.length===0&&!a.list?(o(),i("div",an,[...t[28]||(t[28]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)])])):(o(),i("div",nn,[(o(!0),i(J,null,G(u.value,h=>(o(),i("div",{key:h.name,class:"backup-card"},[t[33]||(t[33]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",on,[e("div",dn,w(h.name),1),e("div",rn,[e("span",un,w(h.size),1),e("span",cn,w(f(h.created)),1),h.signed?(o(),i("span",vn,"ğŸ”’")):(o(),i("span",pn,"âš ï¸"))])]),e("div",mn,[e("button",{class:"btn-icon btn-restore",onClick:K=>O("restore",h),title:"æ¢å¤å¤‡ä»½"},[...t[29]||(t[29]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,bn),e("button",{class:"btn-icon btn-rename",onClick:K=>q(h.name),title:"é‡å‘½å"},[...t[30]||(t[30]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,gn),e("button",{class:"btn-icon",onClick:K=>ae(h.name),title:"ä¸‹è½½å¤‡ä»½"},[...t[31]||(t[31]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)])],8,fn),e("button",{class:"btn-icon btn-danger",onClick:K=>O("delete",h.name),title:"åˆ é™¤å¤‡ä»½"},[...t[32]||(t[32]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,hn)])]))),128))]))])],512),[[ge,n.value==="local"]]),_(e("div",wn,[e("div",kn,[e("button",{class:"btn btn-primary",onClick:p},[...t[34]||(t[34]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),E(" WebDAVé…ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:oe,disabled:a.webdavBackup||!l.configured},[t[35]||(t[35]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),E(" "+w(a.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,yn),e("button",{class:"btn btn-secondary",onClick:X,disabled:a.webdavList||!l.configured},[t[36]||(t[36]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),E(" "+w(a.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,_n)]),m.value.text?(o(),i("div",{key:0,class:F(["message",m.value.type])},w(m.value.text),3)):P("",!0),l.configured?P("",!0):(o(),i("div",$n,[...t[37]||(t[37]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)])])),e("div",Cn,[M.value.length===0&&!a.webdavList?(o(),i("div",Mn,[...t[38]||(t[38]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)])])):(o(),i("div",xn,[(o(!0),i(J,null,G(M.value,h=>(o(),i("div",{key:h.name,class:"backup-card"},[t[41]||(t[41]=ne('<div class="backup-icon" data-v-b8ebf567><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-b8ebf567><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-b8ebf567></path><polyline points="14 2 14 8 20 8" data-v-b8ebf567></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-b8ebf567></path></svg></div>',1)),e("div",Vn,[e("div",Bn,w(h.name),1),e("div",Un,[e("span",An,w(h.size),1),e("span",Dn,w(f(h.created)),1)])]),e("div",In,[e("button",{class:"btn-icon btn-restore",onClick:K=>O("webdav-restore",h.name),title:"ä»WebDAVæ¢å¤"},[...t[39]||(t[39]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,Tn),e("button",{class:"btn-icon btn-danger",onClick:K=>O("webdav-delete",h.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},[...t[40]||(t[40]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,Sn)])]))),128))]))])],512),[[ge,n.value==="webdav"]]),_(e("div",Ln,[m.value.text?(o(),i("div",{key:0,class:F(["message",m.value.type])},w(m.value.text),3)):P("",!0),e("div",Wn,[t[76]||(t[76]=e("h3",null,"âš¡ è‡ªåŠ¨å¤‡ä»½é…ç½®",-1)),t[77]||(t[77]=e("p",{class:"config-description"},"é…ç½®ç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ç­–ç•¥ï¼ŒåŒ…æ‹¬å¢é‡å¤‡ä»½å’Œå®šæ—¶å¤‡ä»½ã€‚",-1)),e("div",Nn,[e("div",zn,[t[43]||(t[43]=e("h4",null,"å¢é‡å¤‡ä»½ï¼ˆé˜²æŠ–ï¼‰",-1)),e("label",Pn,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=h=>c.debounce.enabled=h)},null,512),[[le,c.debounce.enabled]]),t[42]||(t[42]=e("span",{class:"slider"},null,-1))])]),t[48]||(t[48]=e("p",{class:"config-info"},"å½“æ•°æ®å˜æ›´æ—¶ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤‡ä»½ã€‚é€‚åˆé¢‘ç¹ä¿®æ”¹çš„åœºæ™¯ã€‚",-1)),c.debounce.enabled?(o(),i("div",Hn,[e("div",En,[t[44]||(t[44]=e("label",null,"å»¶è¿Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=h=>c.debounce.delay=h),min:"5",max:"1440",class:"form-input"},null,512),[[D,c.debounce.delay,void 0,{number:!0}]]),t[45]||(t[45]=e("small",null,"æ•°æ®ä¿®æ”¹åå»¶è¿Ÿå¤šä¹…è§¦å‘å¤‡ä»½ï¼ŒèŒƒå›´ï¼š5-1440åˆ†é’Ÿ",-1))]),e("div",Fn,[t[46]||(t[46]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=h=>c.debounce.keep=h),min:"1",max:"30",class:"form-input"},null,512),[[D,c.debounce.keep,void 0,{number:!0}]]),t[47]||(t[47]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))])])):P("",!0)]),e("div",On,[e("div",Rn,[t[50]||(t[50]=e("h4",null,"å®šæ—¶å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰",-1)),e("label",jn,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=h=>c.scheduled.enabled=h)},null,512),[[le,c.scheduled.enabled]]),t[49]||(t[49]=e("span",{class:"slider"},null,-1))])]),t[58]||(t[58]=e("p",{class:"config-info"},"æ¯å¤©åœ¨å›ºå®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚",-1)),c.scheduled.enabled?(o(),i("div",qn,[e("div",Jn,[t[52]||(t[52]=e("label",null,"å¤‡ä»½æ—¶é—´",-1)),e("div",Gn,[_(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=h=>c.scheduled.hour=h),min:"0",max:"23",class:"form-input time-field",placeholder:"æ—¶"},null,512),[[D,c.scheduled.hour,void 0,{number:!0}]]),t[51]||(t[51]=e("span",null,":",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=h=>c.scheduled.minute=h),min:"0",max:"59",class:"form-input time-field",placeholder:"åˆ†"},null,512),[[D,c.scheduled.minute,void 0,{number:!0}]])]),t[53]||(t[53]=e("small",null,"æ ¼å¼ï¼š24å°æ—¶åˆ¶ï¼Œå¦‚ 02:00",-1))]),e("div",Kn,[t[54]||(t[54]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=h=>c.scheduled.keep=h),min:"1",max:"30",class:"form-input"},null,512),[[D,c.scheduled.keep,void 0,{number:!0}]]),t[55]||(t[55]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))]),e("div",Qn,[e("label",Xn,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=h=>c.scheduled.onlyIfModified=h)},null,512),[[le,c.scheduled.onlyIfModified]]),t[56]||(t[56]=e("span",null,"ä»…åœ¨æœ‰ä¿®æ”¹æ—¶å¤‡ä»½",-1))]),t[57]||(t[57]=e("small",null,"å¦‚æœ24å°æ—¶å†…å·²æœ‰å¢é‡å¤‡ä»½ï¼Œè·³è¿‡å®šæ—¶å¤‡ä»½ï¼ˆé¿å…é‡å¤ï¼‰",-1))])])):P("",!0)]),e("div",Yn,[e("div",Zn,[t[60]||(t[60]=e("h4",null,"â˜ï¸ WebDAV è‡ªåŠ¨åŒæ­¥",-1)),e("label",eo,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=h=>c.webdav.enabled=h),onChange:ie},null,544),[[le,c.webdav.enabled]]),t[59]||(t[59]=e("span",{class:"slider"},null,-1))])]),e("p",to,[t[61]||(t[61]=E(" è‡ªåŠ¨å°†æœ¬åœ°å¤‡ä»½åŒæ­¥åˆ° WebDAV äº‘ç«¯ã€‚ ",-1)),l.configured?P("",!0):(o(),i("span",so,'âš ï¸ è¯·å…ˆåœ¨"WebDAVå¤‡ä»½"æ ‡ç­¾é¡µé…ç½®è¿æ¥'))]),c.webdav.enabled?(o(),i("div",lo,[e("div",ao,[e("label",no,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=h=>c.webdav.syncDaily=h)},null,512),[[le,c.webdav.syncDaily]]),t[62]||(t[62]=e("span",null,"åŒæ­¥æ¯æ—¥å®šæ—¶å¤‡ä»½",-1))]),t[63]||(t[63]=e("small",null,"æ¯å¤©å®šæ—¶å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))]),e("div",oo,[e("label",io,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=h=>c.webdav.syncIncremental=h)},null,512),[[le,c.webdav.syncIncremental]]),t[64]||(t[64]=e("span",null,"åŒæ­¥å¢é‡å¤‡ä»½",-1))]),t[65]||(t[65]=e("small",null,"å¢é‡å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))])])):P("",!0)]),e("div",ro,[e("div",uo,[t[67]||(t[67]=e("h4",null,"è‡ªåŠ¨æ¸…ç†",-1)),e("label",co,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=h=>c.autoClean=h)},null,512),[[le,c.autoClean]]),t[66]||(t[66]=e("span",{class:"slider"},null,-1))])]),t[68]||(t[68]=e("p",{class:"config-info"},"è‡ªåŠ¨åˆ é™¤è¶…å‡ºä¿ç•™æ•°é‡çš„æ—§å¤‡ä»½æ–‡ä»¶ï¼ˆæŒ‰æ—¶é—´æ’åºï¼Œä¿ç•™æœ€æ–°çš„ï¼‰ã€‚",-1))]),$.value?(o(),i("div",vo,[t[73]||(t[73]=e("h4",null,"ğŸ“Š å¤‡ä»½ç»Ÿè®¡",-1)),e("div",po,[e("div",mo,[t[69]||(t[69]=e("span",{class:"stat-label"},"å¢é‡å¤‡ä»½æ•°é‡",-1)),e("span",bo,w(((R=$.value.incremental)==null?void 0:R.count)||0)+" ä¸ª",1)]),e("div",go,[t[70]||(t[70]=e("span",{class:"stat-label"},"æœ€åå¢é‡å¤‡ä»½",-1)),e("span",fo,w(f($.value.lastDebounce)||"æ— "),1)]),e("div",ho,[t[71]||(t[71]=e("span",{class:"stat-label"},"æœ€åå®šæ—¶å¤‡ä»½",-1)),e("span",wo,w(f($.value.lastScheduled)||"æ— "),1)]),e("div",ko,[t[72]||(t[72]=e("span",{class:"stat-label"},"ä¸‹æ¬¡å®šæ—¶å¤‡ä»½",-1)),e("span",yo,w(I()),1)])])])):P("",!0),e("div",_o,[e("button",{class:"btn btn-secondary",onClick:Z},[...t[74]||(t[74]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1),E(" é‡ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:ue,disabled:a.autoBackupConfig},[t[75]||(t[75]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)),E(" "+w(a.autoBackupConfig?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,$o)])])],512),[[ge,n.value==="auto"]]),x.value?(o(),i("div",Co,[e("div",Mo,[t[82]||(t[82]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",xo,[t[78]||(t[78]=e("label",null,[E("WebDAV URL "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=h=>s.url=h),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[D,s.url]]),t[79]||(t[79]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",Vo,[t[80]||(t[80]=e("label",null,[E("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=h=>s.username=h),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[D,s.username]])]),e("div",Bo,[t[81]||(t[81]=e("label",null,[E("å¯†ç  "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"password","onUpdate:modelValue":t[17]||(t[17]=h=>s.password=h),placeholder:l.configured?"ç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜":"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,8,Uo),[[D,s.password]]),l.configured?(o(),i("small",Do,"å¦‚éœ€ä¿®æ”¹å¯†ç è¯·è¾“å…¥æ–°å¯†ç ï¼Œç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜")):(o(),i("small",Ao,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç "))]),e("div",Io,[e("button",{class:"btn btn-secondary",onClick:t[18]||(t[18]=h=>x.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:ee,disabled:a.webdavConfig},w(a.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,To)])])])):P("",!0),d.show?(o(),i("div",So,[e("div",Lo,[e("h3",null,"ç¡®è®¤"+w(d.title),1),e("p",Wo,w(d.message),1),e("div",No,[e("button",{class:"btn btn-secondary",onClick:t[19]||(t[19]=h=>d.show=!1),disabled:d.processing},"å–æ¶ˆ",8,zo),e("button",{class:F(["btn",d.confirmClass]),onClick:W,disabled:d.processing},w(d.processing?"å¤„ç†ä¸­...":"ç¡®è®¤"),11,Po)])])])):P("",!0),T.value?(o(),i("div",Ho,[e("div",Eo,[t[86]||(t[86]=e("h3",null,"åˆ›å»ºå¤‡ä»½",-1)),e("div",Fo,[t[83]||(t[83]=e("label",null,"å¤‡ä»½åç§°ï¼ˆå¯é€‰ï¼‰",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=h=>g.name=h),placeholder:"ä¾‹å¦‚ï¼šæ·»åŠ ä¹¦ç­¾åçš„å¤‡ä»½",class:"form-input",maxlength:"50"},null,512),[[D,g.name]]),t[84]||(t[84]=e("small",null,"ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤åç§°ï¼ˆbackup-æ—¶é—´æˆ³ï¼‰",-1))]),e("div",Oo,[t[85]||(t[85]=e("label",null,"å¤‡ä»½æè¿°ï¼ˆå¯é€‰ï¼‰",-1)),_(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=h=>g.description=h),placeholder:"æè¿°è¿™æ¬¡å¤‡ä»½çš„å†…å®¹æˆ–ç›®çš„...",class:"form-input",rows:"3"},null,512),[[D,g.description]])]),e("div",Ro,[e("button",{class:"btn btn-secondary",onClick:t[22]||(t[22]=h=>T.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:j,disabled:a.create},w(a.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),9,jo)])])])):P("",!0),S.value?(o(),i("div",qo,[e("div",Jo,[t[88]||(t[88]=e("h3",null,"é‡å‘½åå¤‡ä»½",-1)),e("div",Go,[t[87]||(t[87]=e("label",null,[E("æ–°åç§° "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=h=>v.newName=h),placeholder:"è¾“å…¥æ–°çš„å¤‡ä»½åç§°",class:"form-input",maxlength:"50"},null,512),[[D,v.newName]]),e("small",null,"åŸåç§°ï¼š"+w(v.oldName),1)]),e("div",Ko,[e("button",{class:"btn btn-secondary",onClick:t[24]||(t[24]=h=>S.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:B,disabled:a.rename||!v.newName.trim()},w(a.rename?"é‡å‘½åä¸­...":"ç¡®è®¤é‡å‘½å"),9,Qo)])])])):P("",!0)])}}},Yo=Y(Xo,[["__scopeId","data-v-b8ebf567"]]),Zo={key:0,class:"login-container"},ei={class:"login-card"},ti={class:"login-form"},si={class:"password-input-wrapper"},li=["type"],ai={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ni={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},oi={class:"login-buttons"},ii=["disabled"],di={key:0,class:"login-error"},ri={key:1,class:"admin-layout"},ui={class:"menu-list"},ci={class:"admin-main"},vi={class:"admin-header"},pi={class:"header-title"},mi={class:"admin-content"},bi={__name:"Admin",setup(H){const n=b("welcome"),u={welcome:yt,menu:ms,card:el,duplicate:Nl,tag:ta,ad:ya,friend:Da,user:Ka,backup:Yo},M=pe(()=>u[n.value]),x=pe(()=>n.value==="welcome"?{lastLoginTime:T.value,lastLoginIp:S.value,currentUsername:C.value}:{}),T=b(""),S=b(""),C=b("admin"),a=b(!1),g=b(""),v=b(""),m=b(!1),d=b(""),l=b(!1),s=b(!1),c=pe(()=>{switch(n.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"duplicate":return"å»é‡ç®¡ç†";case"tag":return"æ ‡ç­¾ç®¡ç†";case"ad":return"å¹¿å‘Šç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";default:return""}});te(()=>{const q=localStorage.getItem("token");a.value=!!q,a.value&&$()});function $(){return V(this,null,function*(){try{const q=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(q.ok){const B=yield q.json();T.value=B.last_login_time||"",S.value=B.last_login_ip||"",C.value=B.username||"admin"}}catch(q){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",q)}})}function L(){return V(this,null,function*(){var q,B;if(!g.value||!v.value){d.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}m.value=!0,d.value="";try{const z=yield vt(g.value,v.value);z.data.token&&(localStorage.setItem("token",z.data.token),a.value=!0,T.value=z.data.lastLoginTime||"",S.value=z.data.lastLoginIp||"",yield $())}catch(z){d.value=((B=(q=z.response)==null?void 0:q.data)==null?void 0:B.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{m.value=!1}})}function k(){localStorage.removeItem("token"),a.value=!1,g.value="",v.value="",d.value=""}function y(){window.open("/","_blank")}function Q(){s.value=!s.value}function j(){s.value=!1}return(q,B)=>a.value?(o(),i("div",ri,[e("aside",{class:F(["admin-sider",{open:s.value}]),onClick:me(j,["self"])},[e("div",{class:"logo clickable",onClick:B[3]||(B[3]=z=>{n.value="welcome",j()})},"Admin"),e("ul",ui,[e("li",{class:F({active:n.value==="menu"}),onClick:B[4]||(B[4]=z=>{n.value="menu",j()})},"æ ç›®ç®¡ç†",2),e("li",{class:F({active:n.value==="card"}),onClick:B[5]||(B[5]=z=>{n.value="card",j()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:F({active:n.value==="duplicate"}),onClick:B[6]||(B[6]=z=>{n.value="duplicate",j()})},"å»é‡ç®¡ç†",2),e("li",{class:F({active:n.value==="tag"}),onClick:B[7]||(B[7]=z=>{n.value="tag",j()})},"æ ‡ç­¾ç®¡ç†",2),e("li",{class:F({active:n.value==="ad"}),onClick:B[8]||(B[8]=z=>{n.value="ad",j()})},"å¹¿å‘Šç®¡ç†",2),e("li",{class:F({active:n.value==="friend"}),onClick:B[9]||(B[9]=z=>{n.value="friend",j()})},"å‹é“¾ç®¡ç†",2),e("li",{class:F({active:n.value==="user"}),onClick:B[10]||(B[10]=z=>{n.value="user",j()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:F({active:n.value==="backup"}),onClick:B[11]||(B[11]=z=>{n.value="backup",j()})},"å¤‡ä»½ç®¡ç†",2)])],2),e("main",ci,[e("div",vi,[e("button",{class:"menu-toggle",onClick:Q}," â˜° "),e("div",pi,w(c.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:y,title:"è¿›å…¥ä¸»é¡µ"},[...B[16]||(B[16]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),e("button",{class:"btn logout-btn",onClick:k},"é€€å‡ºç™»å½•")])]),e("div",mi,[Le(Ne,{name:"fade",mode:"out-in"},{default:We(()=>[(o(),ze(Pe(M.value),He({key:n.value},x.value),null,16))]),_:1})]),B[17]||(B[17]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[E("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(o(),i("div",Zo,[e("div",ei,[B[15]||(B[15]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",ti,[_(e("input",{"onUpdate:modelValue":B[0]||(B[0]=z=>g.value=z),type:"text",placeholder:"ç”¨æˆ·åï¼ˆé»˜è®¤ï¼šadminï¼‰",class:"login-input",onKeyup:he(L,["enter"])},null,544),[[D,g.value]]),e("div",si,[_(e("input",{"onUpdate:modelValue":B[1]||(B[1]=z=>v.value=z),type:l.value?"text":"password",placeholder:"å¯†ç ï¼ˆé»˜è®¤ï¼š123456ï¼‰",class:"login-input password-input",onKeyup:he(L,["enter"])},null,40,li),[[Se,v.value]]),e("span",{class:"toggle-password",onClick:B[2]||(B[2]=z=>l.value=!l.value)},[l.value?(o(),i("svg",ai,[...B[12]||(B[12]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])):(o(),i("svg",ni,[...B[13]||(B[13]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])]))])]),e("div",oi,[e("button",{onClick:y,class:"back-btn"},[...B[14]||(B[14]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),E(" è¿”å›é¦–é¡µ ",-1)])]),e("button",{onClick:L,class:"login-btn",disabled:m.value},w(m.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,ii)]),d.value?(o(),i("p",di,w(d.value),1)):P("",!0)])])]))}},wi=Y(bi,[["__scopeId","data-v-2762ba0b"]]);export{wi as default};
